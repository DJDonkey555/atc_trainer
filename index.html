<!DOCTYPE html>
<html>
<head>
    <title>FAWB ATC Trainer</title>
</head>
<body style="font-family: Arial; text-align: center; margin-top: 100px;">

    <h1>FAWB ATC Trainer</h1>

    <p id="atcText">
        ZS-ABC, taxi to runway 29 via Alpha, Bravo, hold short runway 23.
    </p>

    <button id="speakBtn" onclick="speak()">Play ATC Instruction</button>

    <script>
        let isSpeaking = false;

        function speak() {

            if (isSpeaking) return; // prevents spam clicking

            let text = document.getElementById("atcText").innerText;
            let msg = new SpeechSynthesisUtterance(text);

            // Make it sound more like ATC
            msg.rate = 1.05;   // slightly faster
            msg.pitch = 0.9;   // slightly flatter
            msg.volume = 1;

            // Try to select a better voice
            let voices = speechSynthesis.getVoices();
            for (let i = 0; i < voices.length; i++) {
                if (voices[i].name.includes("Google") || voices[i].name.includes("English")) {
                    msg.voice = voices[i];
                    break;
                }
            }

            isSpeaking = true;
            document.getElementById("speakBtn").disabled = true;

            msg.onend = function() {
                isSpeaking = false;
                document.getElementById("speakBtn").disabled = false;
            };

            speechSynthesis.speak(msg);
        }

        // Load voices properly (important for Chrome)
        speechSynthesis.onvoiceschanged = function() {
            speechSynthesis.getVoices();
        };
    </script>

</body>
</html>
